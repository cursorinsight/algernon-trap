{"dependencies":[],"generated":{"js":"/* global module */\r\n\r\nvar VisibilityChangeHandler = function(window, state, buffer) {\r\n\"use strict\";\r\n// ---------------------------------------------------------------------------\r\n\r\nvar\r\n  stateKey,\r\n  eventKey,\r\n\r\n  keys = {\r\n    hidden: \"visibilitychange\",\r\n    webkitHidden: \"webkitvisibilitychange\",\r\n    mozHidden: \"mozvisibilitychange\",\r\n    msHidden: \"msvisibilitychange\"\r\n  };\r\n\r\nfor (stateKey in keys) {\r\n  if (stateKey in window.document) {\r\n    eventKey = keys[stateKey];\r\n    break;\r\n  }\r\n}\r\n\r\nvar\r\n  handler = function(event) {\r\n    var dT = state.getDT(event, 20);\r\n\r\n    if (window.document[stateKey]) { // idle/hidden, 0b1011\r\n      buffer.push([11, dT],\r\n                  [ 4, 20]);\r\n    } else { // focused/visible, 0b1010\r\n      buffer.push([10, dT],\r\n                  [ 4, 20]);\r\n    }\r\n  };\r\n\r\nthis.start = function() {\r\n  window.addEventListener(eventKey, handler, false);\r\n};\r\n\r\nthis.stop = function() {\r\n  window.removeEventListener(eventKey, handler, false);\r\n};\r\n\r\n// ---------------------------------------------------------------------------\r\n};\r\n\r\nmodule.exports = VisibilityChangeHandler;\r\n"},"hash":"2c1fa9ef8b887f0751eab25e8de58878"}