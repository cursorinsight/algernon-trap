{"dependencies":[],"generated":{"js":"/* global module */\r\n\r\n// TODO simplify/check this handler\r\n\r\nvar PageScrollHandler = function(element, state, buffer) {\r\n\"use strict\";\r\n// ---------------------------------------------------------------------------\r\n\r\nvar\r\n  abs = Math.abs,\r\n  eventName = \"scroll\",\r\n\r\n  handler = function(event) {\r\n\r\n    var\r\n      pX, pY,\r\n      dX, dY,\r\n      signDX, signDY,\r\n      absDX, absDY,\r\n\r\n      dT = state.getDT(event, 20);\r\n\r\n    // Scroll X/Y on current page\r\n    if (\"pageXOffset\" in element && element.document) { // it's a window, or looks like a window\r\n      var doc = element.document.documentElement;\r\n      pX = (element.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\r\n      pY = (element.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);\r\n    } else { // fallback\r\n      pX = event.pageX;\r\n      pY = event.pageY;\r\n    }\r\n\r\n    dX     = pX - state.pX;\r\n    signDX = dX < 0 ? 1 : 0;\r\n    absDX  = abs(dX);\r\n    dY     = pY - state.pY;\r\n    signDY = dY < 0 ? 1 : 0;\r\n    absDY  = abs(dY);\r\n\r\n    state.pageScrollX = pX;\r\n    state.pageScrollY = pY;\r\n\r\n    buffer.push([4, dT, signDX, absDX, signDY, absDY],\r\n                [4, 20,      1,    11,      1,    11]);\r\n\r\n    return true;\r\n  };\r\n\r\nthis.start = function() {\r\n\r\n  // Scroll X/Y on current page\r\n  if (\"pageXOffset\" in element && element.document) { // it's a window, or looks like a window\r\n    var doc = element.document.documentElement;\r\n    state.pageScrollX = (element.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\r\n    state.pageScrollY = (element.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);\r\n  } else { // fallback\r\n    state.pageScrollX = 0;\r\n    state.pageScrollY = 0;\r\n  }\r\n\r\n  element.addEventListener(eventName, handler, false);\r\n};\r\n\r\nthis.stop = function() {\r\n  element.removeEventListener(eventName, handler, false);\r\n};\r\n\r\n// ---------------------------------------------------------------------------\r\n};\r\n\r\nmodule.exports = PageScrollHandler;\r\n"},"hash":"f973d90a0d2a8a3920385eacf76e27f1"}