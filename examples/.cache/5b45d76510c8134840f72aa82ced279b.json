{"dependencies":[{"name":"../../src/ci-trap","loc":{"line":9,"column":21}}],"generated":{"js":"/* global window document require */\r\n\r\n(function(global, window, document, require) {\r\n\"use strict\";\r\n// ---------------------------------------------------------------------------\r\n\r\n// Mini-apps demonstrating CITrap's functions.\r\n\r\nvar CITrap = require(\"../../src/ci-trap\");\r\n\r\n// Example 0 -- export CITrap to play around.\r\nwindow.CITrap = CITrap;\r\n// end of Example 0\r\n\r\n// Example 1 -- start-stop-send buttons\r\nvar ciTrap = new CITrap();\r\nwindow.ciTrap = ciTrap;\r\n\r\nvar ex1StartButton        = document.getElementById(\"ex1-start\"),\r\n  ex1StopButton           = document.getElementById(\"ex1-stop\"),\r\n  ex1ShowBufferButton     = document.getElementById(\"ex1-show-buffer\"),\r\n  ex1MarkButton           = document.getElementById(\"ex1-mark\"),\r\n  ex1DebugButton          = document.getElementById(\"ex1-debug\"),\r\n  ex1SendButton           = document.getElementById(\"ex1-send\"),\r\n\r\n  stateSpan               = document.getElementById(\"window-state\");\r\n\r\nex1StartButton.addEventListener(\"click\", function(event) {\r\n  if (event.preventDefault) { event.preventDefault(); } else { event.returnValue = false; }\r\n  ciTrap.start();\r\n  // Remove this when DOM-events are available in CITrap\r\n  stateSpan.innerHTML = \"processing\";\r\n});\r\n\r\nex1StopButton.addEventListener(\"click\", function(event) {\r\n  if (event.preventDefault) { event.preventDefault(); } else { event.returnValue = false; }\r\n  ciTrap.stop();\r\n  // Remove this when DOM-events are available in CITrap\r\n  stateSpan.innerHTML = \"stopped\";\r\n});\r\n\r\nex1ShowBufferButton.addEventListener(\"click\", function(event) {\r\n  if (event.preventDefault) { event.preventDefault(); } else { event.returnValue = false; }\r\n  var pre = document.getElementById(\"window-buffer\");\r\n  pre.innerHTML = ciTrap.buffer();\r\n});\r\n\r\nex1MarkButton.addEventListener(\"click\", function(event) {\r\n  if (event.preventDefault) { event.preventDefault(); } else { event.returnValue = false; }\r\n  var markEvent = new window.Event(\"ct:mark\"),\r\n    markInput = document.getElementById(\"ex1-mark-input\"),\r\n    text = markInput.value;\r\n  if (text) { markEvent.text = text; }\r\n  if (ciTrap.element) {\r\n    ciTrap.element.dispatchEvent(markEvent);\r\n  }\r\n  stateSpan.innerHTML = \"sent\";\r\n});\r\n\r\nex1DebugButton.addEventListener(\"click\", function(event) {\r\n  if (event.preventDefault) { event.preventDefault(); } else { event.returnValue = false; }\r\n  var debugEvent = new window.Event(\"ct:debug\");\r\n  if (ciTrap.element) {\r\n    ciTrap.element.dispatchEvent(debugEvent);\r\n  }\r\n  stateSpan.innerHTML = \"sent\";\r\n});\r\n\r\nex1SendButton.addEventListener(\"click\", function(event) {\r\n  if (event.preventDefault) { event.preventDefault(); } else { event.returnValue = false; }\r\n  ciTrap.send(false, function() {stateSpan.innerHTML = \"sent\";});\r\n});\r\n\r\n// end of Example 1\r\n\r\n// ---------------------------------------------------------------------------\r\n})(this, window, document, require);\r\n"},"hash":"857464d9beab0137ebeb3e162763ceea"}